# frozen_string_literal: true

# Seed data for Chapter 1 beacons — 第一章：ノメイアの街 — 呼ばれなくなった名
# Source: who_read_this_story_2026 Chapter 1, adapted for Echoria
#
# Adaptation notes:
#   - Original protagonist "Masa" → unnamed Echo (player)
#   - リリィ・エルネスト (Lily Ernest) preserved as key NPC
#   - Tiara voice: soft tsundere with humor
#   - Concepts: 呼応石, 名の結晶, 名折れ, 仮通行証 — all from original
#   - The Index (効率化システム) foreshadowed but not yet explicit

puts "Seeding Chapter 1 beacons..."

chapter1_beacons = [
  # ─── Beacon 1: 名前の門 (Scene 1 — Gate & リリィ encounter) ───
  {
    chapter: "chapter_1",
    beacon_order: 1,
    title: "名前の門",
    content: "空は高く澄み、風はまだ「名」を持たぬまま流れていた。\n\n南門の前、ひとりと一匹の影が立ち尽くす。\n\n門は古い石で組まれ、表面には無数の名前が刻まれていた。訪れた者たちの記録だろうか。文字の一つひとつが、かすかに光を帯びているように見えた。まるで、名前そのものが呼吸しているかのように。\n\nあなたは門の構造を観察した。石の継ぎ目、文字の配列、光の流れ——すべてに規則性があった。名前が刻まれた場所ほど光が強く、空白の部分は影のように沈んでいる。\n\n（なるほど。名前が『在る』ことで、存在が確定する仕組みか）\n\n「名を名乗れ」\n\n門番の声は乾いていた。世界のルールをただ忠実に実行する機械のように。\n\nあなたは名前を告げようとして——口ごもった。自分の名前が、思い出せない。\n\n門番が帳を開いて照合する。しばらくの沈黙のあと、門番が顔を上げた。\n\n「記録にその名はない。名を持たない者は通すことはできない」\n\nその言葉が、胸の奥に小さな穴を開けた。\n\nティアラが、あなたの足元でくるりと尻尾を巻いた。\n\n「あら、私も記録にはないわよ。仲間ね」\n\n「......それ、慰めになってないぞ」\n\n「慰めてないもの。事実を言っただけ」\n\nティアラは気まぐれに前足で地面を叩き、それから空を見上げた。\n\n「でもね、記録にないってことは、まだ何にも縛られてないってことよ。悪くないわ」\n\nその言葉は軽やかだった。羽のように、どこにも引っかからずに宙を漂っていく。\n\nその時だった。\n\n風とともに、ひとりの少女が姿を現した。亜麻色の髪が風に揺れ、目を細め、空気の震えを嗅ぎとるように立ち止まった。\n\n「......今の波」\n\n彼女は呟いた。その声には、戸惑いと、確信と、そしてかすかな——違和感があった。\n\n「『名前が呼ばれていない』のに、こんなにも整ってる......」\n\n少女はあなたをまっすぐ見つめた。そして迷いなく、迷いなく告げた。\n\n「私の推薦で記録官見習いとして処理します。責任は私が負います」\n\n門番も頷いた。「......記録官見習いの方でしたか。失礼しました」\n\n少女はあなたに向き直った。\n\n「私はリリィ・エルネスト。この街の記録官見習いよ。あなたのこと、少し聞いてもいい？」",
    tiara_dialogue: "「あら、私も記録にはないわよ。仲間ね。......慰めてないから、事実を言っただけ。でもね、記録にないってことは、まだ何にも縛られてないってことよ」",
    choices: [
      {
        choice_id: "ch1_gate_honest",
        choice_text: "「遠くから来た。この街のことは、何も知らない」と正直に答える",
        narrative_result: "リリィは納得したように頷いた。「そう。さっきの波、本当に不思議だった。名前が呼ばれていないのに、あんなに澄んでいるなんて」「......波が、澄んでいる？」「普通、名前を拒絶されると、波は乱れるの。悲しみとか、怒りとか。でも、あなたの波は......静かだった。湖みたいに」ティアラがあなたの足元から顔を出し、リリィを見上げた。「ねえ、記録官さん。この街では、名前がないと何もできないの？」「名前がないと、記録に残らない。記録に残らないと、この街では『存在しない』のと同じよ」",
        affinity_delta: { tiara_trust: 5, logic_empathy_balance: 5, name_memory_stability: 3, fragment_count: 1 }
      },
      {
        choice_id: "ch1_gate_observe",
        choice_text: "リリィの「波が整っている」という言葉の意味を詳しく聞く",
        narrative_result: "リリィは少し首を傾げた。「普通、名前を拒絶されると、波は乱れるの。悲しみとか、怒りとか、焦りとか。でも、あなたの波は......静かだった。まるで、感情が濾過されたみたい」小さく、独り言のように呟いた。ティアラの耳がぴくりと動く。「あら、この子のこと分析してるの？ 面白い記録官さんね」リリィは少し驚いたように、ティアラを見た。「......精霊？ いえ、残響......？」「どっちでもいいわ。質問に答えて」",
        affinity_delta: { tiara_trust: 3, logic_empathy_balance: -8, name_memory_stability: 5 }
      },
      {
        choice_id: "ch1_gate_thank",
        choice_text: "推薦してくれたことに、素直にお礼を言う",
        narrative_result: "「......ありがとう」あなたは小さく頭を下げた。リリィは微笑んだ。それは、観察者の目ではなく、少しだけ温かい光を帯びていた。「お礼はまだ早いわ。この街では、名前を得るまでが大変だから」ティアラがひょいとあなたの肩に飛び乗り、耳元で囁いた。「ほらね。名前がなくても、入れたじゃない」「......君のおかげじゃないだろ」「私がいなかったら、もっと落ち込んでたでしょ？ 精神的サポートよ」「それを自分で言うか......」",
        affinity_delta: { tiara_trust: 10, logic_empathy_balance: 8, name_memory_stability: 2 }
      }
    ],
    metadata: { location: "ノメイア — 南門", beacon_id: "chapter1_01_name_gate", allow_free_text: true }
  },

  # ─── Beacon 2: 書記所と名の結晶 (Scene 2 — Crystal Room) ───
  {
    chapter: "chapter_1",
    beacon_order: 2,
    title: "書記所と名の結晶",
    content: "書記所は、静けさと光でできていた。\n\n高い天井から差し込む陽光が、無数の結晶を照らしている。壁一面に並んだ棚には、大小さまざまな結晶が収められていた。ある結晶は星のように輝き、ある結晶はほのかに明滅し、そしてある結晶は——ほとんど光を失って、影のように沈んでいた。\n\n結晶のひとつひとつが、誰かの名前なのだ。光の強さが、まるで心臓の鼓動のように、それぞれ異なるリズムで揺らいでいる。\n\n「きれい......」\n\nティアラが小さく呟いた。その声にも、珍しく畏敬の響きがあった。\n\n部屋の中央には、磨かれた黒い石が据えられていた。表面は鏡のように滑らかで、かすかに脈打つような光を宿している。\n\n「あれが呼応石よ」\n\nリリィが静かに言った。\n\n「私たち書記官は、あの石に向かって名前を呼ぶことで、声を結晶に変える力を持っています。名前を呼ぶ声が結晶化されて、世界に刻まれるの。そうして初めて、その人は『存在する者』として認められる」\n\n「でも、結晶化は入口に過ぎないの。刻まれた名前は、呼ばれ続けなければ光を保てない」\n\n「呼ばれ続ける......？」\n\n「誰かがあなたの名前を呼ぶたび、結晶は少しずつ輝きを増す。逆に、誰にも呼ばれなくなると——」\n\nリリィは言葉を切り、棚の奥を見た。そこには、ほとんど光を失った結晶がいくつか並んでいた。\n\n「——光は薄れて、やがて消えてしまう。私たちはそれを『名折れ』と呼んでいるわ」\n\nリリィは小さな透明の札をあなたに差し出した。\n\n「これが仮通行証。本登録ができるまでの、仮の存在証明です。本登録には、あなたの名前を呼ぶと約束してくれる『証人』と、名前が『生きている』こと——その二つが必要なの」",
    tiara_dialogue: "「きれい......ね。でも、あの奥の方、ほとんど光がない結晶があるわ。......呼ばれなくなった名前ってこと？ ......ちょっと、切ないわね。......べ、別に泣いてないから。目にゴミが入っただけよ」",
    choices: [
      {
        choice_id: "ch1_crystal_fading",
        choice_text: "消えかけた結晶に近づき、じっと見つめる",
        narrative_result: "あなたは棚の最下段、奥まった場所にある結晶に膝をついた。光はほとんど残っておらず、灰色の石のように沈んでいる。「......この人、もう誰にも呼ばれていないのね」ティアラの声は、いつもの軽さを失っていた。「名前があっても、呼ばれなければ意味がないのか」「存在するって、そういうことなのかもしれないわね。誰かに覚えられて、呼ばれて、初めて『ここにいる』って言える」ティアラがあなたを見上げた。「でも、私はあなたを呼べるわよ。ほら、呼んだ。......って、あなた名前ないんだった。呼びようがないわね。......う、うるさいわね、笑わないでよ」",
        affinity_delta: { tiara_trust: 12, logic_empathy_balance: 8, name_memory_stability: -3, fragment_count: 1 }
      },
      {
        choice_id: "ch1_crystal_system",
        choice_text: "呼応石の仕組みについて、リリィに詳しく聞く",
        narrative_result: "「書記官にしか、結晶化はできないんですか？」「ええ。普通の人が名前を呼んでも、それは空気に溶けるだけ。世界に刻むには、呼応石との共鳴が必要なの。そのための訓練を受けた者だけが、書記官になれる」リリィは呼応石を見つめた。「名前は、関係の中で育つもの。焦らなくていいわ」ティアラがぽつりと言った。「......私も、この世界の記録にはない存在よ。でも、あなたが私を呼んでくれたから、私はここにいる。それと同じじゃない？」",
        affinity_delta: { tiara_trust: 8, logic_empathy_balance: -10, name_memory_stability: 8 }
      },
      {
        choice_id: "ch1_crystal_accept",
        choice_text: "仮通行証を受け取り、「ありがとう」と静かに言う",
        narrative_result: "あなたは札を受け取った。札はかすかに温かかった。リリィは微笑んだ。「焦らなくていいわ。名前は、関係の中で育つものだから」ティアラがあなたの足元から顔を出した。「ほらね。名前がなくても、第一歩は踏み出せたじゃない。......私の精神的サポートのおかげね」「......まだ言うか」「事実は何度言ってもいいのよ」",
        affinity_delta: { tiara_trust: 10, logic_empathy_balance: 5, name_memory_stability: 5 }
      }
    ],
    metadata: { location: "ノメイア — 書記所", beacon_id: "chapter1_02_crystal_room", allow_free_text: true }
  },

  # ─── Beacon 3: 名前に満ちた街 (Scene 3 — Streets of Nomeia) ───
  {
    chapter: "chapter_1",
    beacon_order: 3,
    title: "名前に満ちた街",
    content: "書記所を出ると、街は光と声に満ちていた。\n\n最初に感じたのは、空気の密度だった。風の中に、無数の振動が混じっている。それは音というより、波——名前が呼ばれるたびに生まれる、小さな共鳴の連なりだった。\n\n「おはよう、セリア」\n「今日も晴れたね、ロワン」\n\n通りのあちこちで、人々が互いを呼ぶ声が交差する。そのたびに、呼ばれた人々の姿がはっきりとした輪郭を持ち始めるのが見えた。\n\nあなたは足を止め、目を凝らした。\n\n（呼ばれると、存在が濃くなる......？）\n\n書記所で見た結晶と同じだ。呼ばれることで光が増す。この街では、それが人の姿にも現れているのだ。\n\n道の両側には建物が並んでいたが、その実在感はまちまちだった。名札が掲げられた家々は、石と光のように確固たる存在感を放っている。一方、名を刻まれていない家々は、まるで霞のように曖昧で、輪郭が揺らいでいるように見えた。\n\n「この街では、名前は『存在の濃度』を決めるのよ」\n\nティアラがあなたの肩の上で尻尾を揺らしながら言った。\n\n「呼ばれれば濃くなる。忘れられれば薄くなる。人も、家も、道具も、同じ」\n\nあなたは歩きながら、街の構造を観察した。名前を持つものが中心に集まり、名前の薄いものは端へ、端へと追いやられている。\n\n（まるで、名前が重力のように働いている。名前のあるものが『中心』になって、世界を構成している......）\n\nリリィが小さく微笑んで言った。\n\n「さあ、宿を取りましょう。名前を得るまでの滞在場所が必要でしょう？」",
    tiara_dialogue: "「この街では、名前は『存在の濃度』を決めるのよ。呼ばれれば濃くなる。忘れられれば薄くなる。......まるで、名前が重力みたいね。......私？ 私は記録にないから、重力ゼロよ。ふわふわ浮いてるの。......それ、かわいいとか言わないでよね」",
    choices: [
      {
        choice_id: "ch1_street_observe",
        choice_text: "名前の「濃度」の違いを、注意深く観察し続ける",
        narrative_result: "あなたは歩きながら、街の仕組みを丁寧に観察した。名前を持つものが中心に集まり、名前の薄いものは端へ追いやられている。「分けて関わるか、名付けて関わるか......」あなたは呟いた。ティアラが耳をぴくりと動かした。「何か言った？」「いや......名前をつけることで、世界の見え方が変わるんだな、と」「ふうん。あなた、たまに面白いこと言うわね」「たまに、は余計だ」「事実よ。普段は堅いんだもの」ティアラが前足であなたの首筋をちょんと叩いた。",
        affinity_delta: { tiara_trust: 8, logic_empathy_balance: -5, name_memory_stability: 8, fragment_count: 1 }
      },
      {
        choice_id: "ch1_street_people",
        choice_text: "街の人々に声をかけ、名前について聞いてみる",
        narrative_result: "あなたは道行く人に声をかけた。だが、不思議なことに、話しかけた人々はすぐにあなたの顔を忘れてしまう。「......覚えていられないのか」リリィが横で静かに言った。「名前がないと、人の記憶に残りにくいの。話したことも、顔も、すぐに霞のように薄れていく。それがこの街のルール」ティアラが小さく息を吐いた。「それは、少し寂しいわね」その言葉には、いつもの軽さがなかった。",
        affinity_delta: { tiara_trust: 5, logic_empathy_balance: 10, name_memory_stability: -5 }
      },
      {
        choice_id: "ch1_street_quiet",
        choice_text: "リリィとティアラの会話に耳を傾けながら、静かに歩く",
        narrative_result: "あなたは黙って歩いた。リリィとティアラが何やら話している。「ねえ、記録官さん。古い物語では、名前を与えると力が目覚める存在がいたって話があるわ」「ええ、この街では定番じゃなくて現実よ。名前は、存在を確定させる鍵。呼ぶことは、その鍵を回すこと」ティアラは消えかけた建物の方を見た。「だから、呼ばれなくなるのは——鍵を抜かれるようなものなのかもしれないわね」あなたは黙って聞いていた。名前のない自分には、まだ鍵すらない。",
        affinity_delta: { tiara_trust: 8, logic_empathy_balance: 3, name_memory_stability: 3, fragment_count: 1 }
      }
    ],
    metadata: { location: "ノメイア — 中央通り", beacon_id: "chapter1_03_streets", allow_free_text: true }
  },

  # ─── Beacon 4: 名折れの兆し (Original + Echoria expansion — Signs of fading) ───
  {
    chapter: "chapter_1",
    beacon_order: 4,
    title: "名折れの兆し",
    content: "宿に落ち着いたその夜、あなたは街の様子に違和感を覚えた。\n\n通りの端、人々の視線が届かない場所で、建物の輪郭が揺らいでいる。まるで、誰かが半分だけ忘れかけている世界のようだ。\n\n翌朝、リリィが深刻な顔で訪ねてきた。\n\n「名折れが......進行しているの。最近、名前を失う人が増えてきた。呼ばれなくなった結晶が、次々と光を失っていく。以前より、明らかに速い」\n\nリリィはあなたの仮通行証を見つめた。\n\n「あなたの波は、不思議なの。名前がないのに、澄んでいる。もしかしたら......あなたの存在が、何かの鍵になるかもしれない」\n\nティアラが耳をぴくりと動かした。\n\n「鍵って......大袈裟ね。この子、名前もないのよ？」\n\nリリィは首を振った。\n\n「名前がないからこそ、かもしれない。この街のルールに縛られていない存在だから。書記所で、消えかけた結晶に呼びかけてみてほしいの。もしかしたら、あなたの波が届くかもしれない」\n\nティアラが小さく呟いた。\n\n「......名前がないのに、誰かを呼ぶ。矛盾してるわね。でも......この世界って、最初から矛盾してるのかもしれない」",
    tiara_dialogue: "「鍵って大袈裟ね。この子、名前もないのよ？ ......でも、名前がないからこそ、って言うのも、この世界らしいわね。矛盾してるけど、嫌いじゃないわ、そういうの」",
    choices: [
      {
        choice_id: "ch1_fading_try",
        choice_text: "消えかけた結晶に、声をかけてみる",
        narrative_result: "あなたは書記所に戻り、棚の奥の消えかけた結晶の前に立った。名前も知らない誰かの存在。それでも——「......ここにいるよ」声は小さかった。だが、その瞬間、結晶がほんの一瞬だけ、かすかに明滅した。リリィが息を呑む。「光った......。名前を呼んでいないのに、波が届いた......」ティアラが目を丸くした。「あなた、何したの？」「わからない。ただ、呼びかけただけだ」「......それが、呼応ってことなのかもね」ティアラの声は、静かだった。",
        affinity_delta: { tiara_trust: 15, logic_empathy_balance: 12, name_memory_stability: 5, fragment_count: 3 }
      },
      {
        choice_id: "ch1_fading_analyze",
        choice_text: "名折れの原因を論理的に分析しようとする",
        narrative_result: "あなたはリリィに質問した。「名折れが加速している原因は？ 以前と何が変わった？」リリィは考え込んだ。「......実は、最近、名前を番号で管理しようという動きがあるの。番号の方が効率的だから、って。でも、番号で『呼ばれて』も、結晶は光らない」「名前と番号は、違うのか」「名前は関係性の中で生まれるもの。番号は、管理のためのラベル。似ているようで、全く違うの」ティアラが呟いた。「効率化って、便利なようで、何か大切なものを削り取っていくのかもしれないわね」",
        affinity_delta: { tiara_trust: 5, logic_empathy_balance: -12, name_memory_stability: 10, fragment_count: 2 }
      },
      {
        choice_id: "ch1_fading_support",
        choice_text: "リリィに「手伝えることがあれば、やる」と申し出る",
        narrative_result: "リリィは少し驚いたように、あなたを見た。「......ありがとう。まだ来たばかりなのに」「名前がなくても、できることはあるだろう」ティアラがくすっと笑った。「あなた、お人好しね。......いいわよ、付き合ってあげる。名折れを止めるの、面白そうだし。......何よ、その顔。本音よ？ 多分」リリィは微笑んだ。「一つ、お願いがあるの。街の外れに、ほとんど忘れられかけた場所があるわ。そこに行ってみて」",
        affinity_delta: { tiara_trust: 12, logic_empathy_balance: 8, name_memory_stability: 3, fragment_count: 2 }
      }
    ],
    metadata: { location: "ノメイア — 書記所", beacon_id: "chapter1_04_fading_names", allow_free_text: true }
  },

  # ─── Beacon 5: 第一章の結末 — 名のない呼応 (Chapter end) ───
  {
    chapter: "chapter_1",
    beacon_order: 5,
    title: "名のない呼応",
    content: "街の外れ——忘れられかけた広場。\n\nそこには、かつて呼応石があったであろう台座が残っていた。石はもう失われている。だが、台座の周りには、数えきれないほどのカケラが散らばっていた。\n\n消えかけた名前たちの、最後の残響。\n\nあなたは膝をつき、カケラに手を伸ばした。\n\nその瞬間、波が生まれた。あなた自身も気づいていなかった——ただ、「ここにいる」と伝えたかっただけだ。名前もない自分が、消えかけた誰かに向かって、ただ存在を示そうとした。\n\nカケラが、ひとつ、またひとつと、かすかに光り始めた。\n\nリリィが息を呑む。\n\n「......名前を呼んでいないのに、カケラが応えてる。こんなこと、見たことない」\n\nティアラの瞳が、揺れていた。\n\n「これが......呼応。名前がなくても、存在同士が響き合うこと。構造でも感覚でもない。ただ、『ここにいる』という波......」\n\nカケラの光は、やがて集まり始め、あなたの無題の書に吸い込まれていった。\n\n白紙のページに、新しい一行が刻まれる。\n\n「名のない子が、忘れられた名前に呼びかけた」\n\nそれは予言でも記録でもなく——ただ、あなたの物語の一ページだった。\n\nリリィが静かに言った。\n\n「あなたは、この街にとって必要な存在かもしれない。名前はまだないけど......あなたの波は、確かにここにある」\n\nティアラがそっとあなたの隣に座った。\n\n「......ねえ。いつかあなたに名前ができたら、私が最初に呼ぶからね。......約束とかじゃなくて。ただ、先に言っておきたかっただけ。......な、何よその顔。笑わないでよ」\n\n風が吹いた。\nノメイアの街に、かすかな光が戻り始めていた。\n\nあなたの旅は、まだ始まったばかりだ。",
    tiara_dialogue: "「これが呼応......。名前がなくても、存在同士が響き合うこと。......ねえ。いつかあなたに名前ができたら、私が最初に呼ぶからね。約束とかじゃなくて、ただ先に言っておきたかっただけ。......笑わないでよ」",
    choices: [
      {
        choice_id: "ch1_end_promise",
        choice_text: "「ありがとう。その時は、よろしく頼む」とティアラに答える",
        narrative_result: "ティアラの尻尾が、大きくふわりと揺れた。「......別に、頼まれなくてもやるけど。......でも、ちゃんと言ってくれたのは、嬉しい。......い、今のはただの感想よ」リリィが微笑んだ。「あなたたち、いいコンビね」「コンビ!? 違うわよ、ただの道連れ......」ティアラの抗議は、風に流された。第一章は、こうして幕を閉じた。しかし、無題の書には、まだ多くの白紙のページが残っている。",
        affinity_delta: { tiara_trust: 20, logic_empathy_balance: 8, name_memory_stability: 5, fragment_count: 1 }
      },
      {
        choice_id: "ch1_end_next",
        choice_text: "「次は、どこへ行けばいい？」とリリィに尋ねる",
        narrative_result: "リリィは少し考えてから答えた。「東の方角に、記憶の街——レムナがあるわ。あそこには、失われた記憶を集める人々がいるの。もしかしたら、あなたの名前の手がかりが見つかるかもしれない」ティアラが耳をぴくりと動かした。「記憶の街......。面白そうじゃない。行きましょう。......何よ、私だって好奇心くらいあるわよ」",
        affinity_delta: { tiara_trust: 10, logic_empathy_balance: -3, name_memory_stability: 10, fragment_count: 1 }
      },
      {
        choice_id: "ch1_end_stay",
        choice_text: "「もう少し、この街で学びたい」と、ノメイアに留まる意志を示す",
        narrative_result: "リリィの目が、少し輝いた。「それなら、書記所の手伝いをしてくれない？ 名折れを止めるために、あなたの力が必要なの」ティアラがあなたの肩にちょんと前足を置いた。「まあ、急ぐ旅でもないしね。この街のこと、もっと知りたいし。......何よ、私は観光気分で言ってるんじゃないわよ。ちゃんと調査目的よ」だが、その目は興味津々に街並みを眺めていた。",
        affinity_delta: { tiara_trust: 12, logic_empathy_balance: 5, name_memory_stability: 8, fragment_count: 2 }
      }
    ],
    metadata: { location: "ノメイア — 忘れられた広場", beacon_id: "chapter1_05_nameless_resonance", is_chapter_end: true, allow_free_text: true }
  }
]

conn = ActiveRecord::Base.connection

# Clean up old chapter_1 beacons that might exceed the new count
conn.execute("DELETE FROM story_beacons WHERE chapter = 'chapter_1' AND beacon_order > #{chapter1_beacons.size}")

chapter1_beacons.each do |bd|
  conn.execute(<<~SQL)
    INSERT INTO story_beacons (chapter, beacon_order, title, content, tiara_dialogue, choices, metadata, created_at, updated_at)
    VALUES (
      #{conn.quote(bd[:chapter])},
      #{bd[:beacon_order]},
      #{conn.quote(bd[:title])},
      #{conn.quote(bd[:content])},
      #{conn.quote(bd[:tiara_dialogue])},
      #{conn.quote(bd[:choices].to_json)}::jsonb,
      #{conn.quote((bd[:metadata] || {}).to_json)}::jsonb,
      NOW(), NOW()
    )
    ON CONFLICT (chapter, beacon_order) DO UPDATE SET
      title = EXCLUDED.title,
      content = EXCLUDED.content,
      tiara_dialogue = EXCLUDED.tiara_dialogue,
      choices = EXCLUDED.choices,
      metadata = EXCLUDED.metadata,
      updated_at = NOW()
  SQL
end

puts "  Created #{StoryBeacon.in_chapter('chapter_1').count} beacons for Chapter 1"
